define(["jquery","jqueryui","core/modal_factory","local_kopere_dashboard/dataTables_init"],function($,$ui,ModalFactory,dataTables_init){return{init:function(popupid,columns,columnDefs){var data_block_select=false;var chart=$(`#${popupid}-btn-open`);chart.show().click(function(){if(data_block_select){data_block_select.show()}else{ModalFactory.create({type:ModalFactory.types.DEFAULT,title:$(`#${popupid}-btn-open`).attr("title"),body:$(`#${popupid}-datatable-select`).html()}).then(function(modal){if(!modal.root){modal.root=modal._root}data_block_select=modal;data_block_select.show();data_block_select.root.addClass("kopere-bi");data_block_select.root.find(".modal-dialog").addClass("modal-xl").addClass("kopere-dashboard-modal");var urlajax=$(`#${popupid}-btn-open`).attr("data-urlajax");var urlclick=$(`#${popupid}-btn-open`).attr("data-urlclick");$(`#${popupid}-datatable-select`).remove();var defaultColumnDefs=[{render:"numberRenderer",targets:0}];if(columnDefs!==undefined){defaultColumnDefs=columnDefs}dataTables_init.init(`${popupid}-table`,{autoWidth:false,columns:columns,columnDefs:defaultColumnDefs,export_title:false,order:[[1,"asc"]],processing:true,serverSide:true,ajax:{url:urlajax,type:"POST",dataType:"json"}});dataTables_init.click(`${popupid}-table`,["id"],urlclick)})}})}}});